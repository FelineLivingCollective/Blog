{{ define "main" }}
<div class="home">

    {{/* HERO SECTION: Latest Post */}}
    {{ range first 1 .Site.RegularPages }}
    <section class="hero-section reveal">
        <a href="{{ .Permalink }}" class="hero-link">
            {{ $img := .Resources.GetMatch .Params.image }}
            {{ if not $img }}{{ $img = .Resources.GetMatch "images/cover.png" }}{{ end }}
            {{ if not $img }}{{ $img = .Resources.GetMatch "images/hero.png" }}{{ end }}

            {{ if $img }}
            <img src="{{ $img.RelPermalink }}" alt="{{ .Title }}" class="hero-image">
            {{ else if .Params.image }}
            <img src="{{ .Params.image }}" alt="{{ .Title }}" class="hero-image">
            {{ end }}
            <div class="hero-overlay">
                <div class="hero-content">
                    <h2 class="hero-title">{{ .Title }}</h2>
                    <div class="hero-meta">
                        <time datetime="{{ .Date.Format " 2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
                    </div>
                </div>
            </div>
        </a>
    </section>
    {{ end }}

    {{/* GRID SECTION: Other Posts */}}
    <section class="posts-grid">
        {{ range after 1 .Site.RegularPages }}
        <article class="post-card reveal">
            {{ $img := .Resources.GetMatch .Params.image }}
            {{ if not $img }}{{ $img = .Resources.GetMatch "images/cover.png" }}{{ end }}
            {{ if not $img }}{{ $img = .Resources.GetMatch "images/hero.png" }}{{ end }}

            {{ if or $img .Params.image }}
            <a href="{{ .Permalink }}">
                <img src="{{ with $img }}{{ .RelPermalink }}{{ else }}{{ .Params.image }}{{ end }}" alt="{{ .Title }}">
            </a>
            {{ end }}

            <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>

            <time datetime="{{ .Date.Format " 2006-01-02" }}">
                {{ .Date.Format "January 2, 2006" }}
            </time>
        </article>
        {{ end }}
    </section>
</div>
{{ end }}